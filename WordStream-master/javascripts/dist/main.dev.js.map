{"version":3,"sources":["main.js"],"names":["svg","d3","select","append","attr","id","width","height","fileList","initialDataset","categories","fileName","opacity","layerPath","maxFreq","axisGroup","xGridlinesGroup","mainGroup","legendGroup","addDatasetsOptions","document","getElementById","i","length","opt","el","createElement","textContent","value","appendChild","loadData","spinner","opts","lines","radius","color","speed","trail","className","target","Spinner","spin","indexOf","loadBlogPostData","draw","initTop","checked","loadAuthorData","loadQuantumComputing","loadNewData","event","selectAll","remove","options","selectedIndex","text","data","font","interpolation","axisPadding","legendFontSize","legendOffset","legendHeight","margins","left","top","right","bottom","globalWidth","globalHeight","ws","layout","wordStream","size","fontScale","scale","linear","minFontSize","globalMinFont","maxFontSize","globalMaxFont","flag","globalFlag","boxes","minSud","maxSud","transition","duration","area","interpolate","x","d","y0","y1","y","dates","forEach","row","push","date","xAxisScale","ordinal","domain","rangeBands","xAxis","axis","orient","axisNodes","call","styleAxis","xGridlineScale","range","xGridlinesAxis","gridlineNodes","tickSize","tickFormat","styleGridlineNodes","wordStreamG","lineCardinal","line","boundary","layers","tempPoint","Object","assign","tempPoint2","lenb","combined","slice","substring","topics","curve","exit","enter","style","stroke","topic","allWords","map","concat","words","allW","JSON","parse","stringify","log","lineScale","json","error","rawLinks","threshold","links","filter","weight","isRel","sourceID","split","join","targetID","visibleLinks","s","find","w","placed","t","undefined","sourceX","sourceY","targetX","targetY","extent","opacScale","connection","drawWords","prevColor","texts","textEnter","transform","rotate","fontSize","sudden","visibility","on","thisLink","sourceText","__data__","prevSourceColor","targetText","prevTargetColor","fill","thisText","allTexts","cloned","streamLayer","points","Array","elm","thePoint","timeStep","streamHeight","clonedNode","cloneNode","clonedParentNode","parentNode","datum","allOtherTexts","querySelectorAll","node","removeChild","legendNodes","r","dx","stop"],"mappings":"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","sourcesContent":["// var fileList = [\"WikiNews\",\"Huffington\",\"CrooksAndLiars\",\"EmptyWheel\",\"Esquire\",\"FactCheck\"\n//                 ,\"VIS_papers\",\"IMDB\",\"PopCha\",\"Cards_PC\",\"Cards_Fries\"]\nvar svg = d3.select(\"body\").append('svg')\n    .attr({\n        id: \"mainsvg\",\n        width: 1400,\n        height: 660\n    });\n    var fileList = [\"WikiNews\", \"Huffington\", \"CrooksAndLiars\", \"EmptyWheel\", \"Esquire\", \"FactCheck\", \"VIS_papers\", \"IMDB\", \"PopCha\", \"Cards_PC\", \"Cards_Fries\", \"QuantumComputing\",\"test\"]\n\nvar initialDataset = \"EmptyWheel\";\nvar categories = [\"person\", \"location\", \"organization\", \"miscellaneous\"];\n\nvar fileName;\n\nvar opacity, layerPath, maxFreq;\n\nvar axisGroup = svg.append('g').attr(\"id\", \"axisGroup\");\nvar xGridlinesGroup = svg.append('g').attr(\"id\", \"xGridlinesGroup\");\nvar mainGroup = svg.append('g').attr(\"id\", \"main\");\nvar legendGroup = svg.append('g').attr(\"id\", \"legend\");\n\naddDatasetsOptions();\n\nfunction addDatasetsOptions() {\n    var select = document.getElementById(\"datasetsSelect\");\n    for (var i = 0; i < fileList.length; i++) {\n        var opt = fileList[i];\n        var el = document.createElement(\"option\");\n        el.textContent = opt;\n        el.value = opt;\n        el[\"data-image\"] = \"images2/datasetThumnails/\" + fileList[i] + \".png\";\n        select.appendChild(el);\n    }\n    document.getElementById('datasetsSelect').value = initialDataset;  //************************************************\n    fileName = document.getElementById(\"datasetsSelect\").value;\n    loadData();\n}\n\nvar spinner;\n\nfunction loadData() {\n    // START: loader spinner settings ****************************\n    var opts = {\n        lines: 25, // The number of lines to draw\n        length: 15, // The length of each line\n        width: 5, // The line thickness\n        radius: 25, // The radius of the inner circle\n        color: '#000', // #rgb or #rrggbb or array of colors\n        speed: 2, // Rounds per second\n        trail: 50, // Afterglow percentage\n        className: 'spinner', // The CSS class to assign to the spinner\n    };\n    var target = document.getElementById('loadingSpinner');\n    spinner = new Spinner(opts).spin(target);\n    // END: loader spinner settings ****************************\n    fileName = \"data/\" + fileName + \".tsv\"; // Add data folder path\n    if (fileName.indexOf(\"test\") >= 0) {\n        categories = [\"content\"];\n        loadBlogPostData(draw, initTop);\n        document.getElementById(\"rel\").checked = true;\n    }    \n    else if (fileName.indexOf(\"Cards_Fries\") >= 0) {\n        categories = [\"increases_activity\", \"decreases_activity\"];\n        loadAuthorData(draw, initTop);\n    }\n    else if (fileName.indexOf(\"Cards_PC\") >= 0) {\n        categories = [\"adds_modification\", \"removes_modification\", \"increases\", \"decreases\", \"binds\", \"translocation\"];\n        loadAuthorData(draw, initTop);\n    }\n    else if (fileName.indexOf(\"PopCha\") >= 0) {\n        categories = [\"Comedy\", \"Drama\", \"Action\", \"Fantasy\", \"Horror\"];\n        loadAuthorData(draw, initTop);\n    }\n    else if (fileName.indexOf(\"IMDB\") >= 0) {\n        categories = [\"Comedy\", \"Drama\", \"Action\", \"Family\"];\n        loadAuthorData(draw, initTop);\n    }\n    else if (fileName.indexOf(\"VIS\") >= 0) {\n        categories = [\"Vis\", \"VAST\", \"InfoVis\", \"SciVis\"];\n        loadAuthorData(draw, initTop);\n    }\n    else if (fileName.indexOf(\"QuantumComputing\") >= 0) {\n        fileName = \"data/\" + fileName + \".tsv\"; // Add data folder path\n        categories = [\"Unknown citation\", \"Have citation\", \"Affiliations\", \"Author\"];\n        initTop = 15;\n        loadQuantumComputing(draw, initTop);\n    }\n    else if (fileName.indexOf(\"Huffington\") >= 0) {\n        categories = [\"person\", \"location\", \"organization\", \"miscellaneous\"];\n        loadBlogPostData(draw, initTop);\n        document.getElementById(\"rel\").checked = true;\n    }\n    else {\n        categories = [\"person\", \"location\", \"organization\", \"miscellaneous\"];\n        loadBlogPostData(draw, initTop);\n    }\n}\n\nfunction loadNewData(event) {\n    legendGroup.selectAll(\"*\").remove();\n    axisGroup.selectAll(\"*\").remove();\n    xGridlinesGroup.selectAll(\"*\").remove();\n    mainGroup.selectAll(\"*\").remove();\n\n    fileName = this.options[this.selectedIndex].text;\n    document.getElementById(\"rel\").checked = false;\n    loadData();\n}\n\nfunction draw(data) {\n    //Layout data\n    var font = \"Arial\";\n    var interpolation = \"cardinal\";\n    const axisPadding = 10;\n    const legendFontSize = 12;\n    const legendOffset = 10;\n    var legendHeight = categories.length * legendFontSize;\n\n    const margins = {left: 20, top: 20, right: 10, bottom: 30};\n    var width = globalWidth - (margins.left + margins.top);\n    var height = globalHeight - (+margins.top + margins.bottom + axisPadding + legendHeight);\n    var ws = d3.layout.wordStream()\n            .size([width, height])\n            .fontScale(d3.scale.linear())\n            .minFontSize(globalMinFont)\n            .maxFontSize(globalMaxFont)\n            .data(data)\n            .flag(globalFlag)\n        // .font(font)\n        // .interpolate(interpolation)\n        // .fontScale(d3.scale.linear())\n    ;\n    var boxes = ws.boxes();\n    var minSud = ws.minSud();\n    var maxSud = ws.maxSud();\n    maxFreq = ws.maxFreq();\n\n    //set svg data.\n    svg\n        .transition()\n        .duration(300)\n        .attr({\n            width: globalWidth,\n            height: globalHeight,\n        });\n\n    var area = d3.svg.area()\n        .interpolate(interpolation)\n        .x(function (d) {\n            return (d.x);\n        })\n        .y0(function (d) {\n            return d.y0;\n        })\n        .y1(function (d) {\n            return (d.y0 + d.y);\n        });\n\n    //Display time axes\n    var dates = [];\n    boxes.data.forEach(row => {\n        dates.push(row.date);\n    });\n\n    var xAxisScale = d3.scale.ordinal().domain(dates).rangeBands([0, width]);\n    var xAxis = d3.svg.axis().orient('bottom').scale(xAxisScale);\n\n    axisGroup.attr('transform', 'translate(' + (margins.left) + ',' + (height + margins.top + axisPadding + legendHeight) + ')');\n    var axisNodes = axisGroup.call(xAxis);\n    styleAxis(axisNodes);\n\n    //Display the vertical gridline\n    var xGridlineScale = d3.scale.ordinal().domain(d3.range(0, dates.length + 1)).rangeBands([0, width + width / boxes.data.length]);\n    var xGridlinesAxis = d3.svg.axis().orient('bottom').scale(xGridlineScale);\n\n    xGridlinesGroup.attr('transform', 'translate(' + (margins.left - width / boxes.data.length / 2) + ',' + (height + margins.top + axisPadding + legendHeight + margins.bottom) + ')');\n    var gridlineNodes = xGridlinesGroup.call(xGridlinesAxis.tickSize(-height - axisPadding - legendHeight - margins.bottom, 0, 0).tickFormat(''));\n    styleGridlineNodes(gridlineNodes);\n\n    //Main group\n    mainGroup.attr('transform', 'translate(' + margins.left + ',' + margins.top + ')');\n    var wordStreamG = mainGroup.append('g').attr(\"id\", \"wordStreamG\");\n\n// =============== Get BOUNDARY and LAYERPATH ===============\n    const lineCardinal = d3.svg.line()\n        .x(function (d) {\n            return d.x;\n        })\n        .y(function (d) {\n            return d.y;\n        })\n        .interpolate(\"cardinal\");\n\n    var boundary = [];\n    for (var i = 0; i < boxes.layers[0].length; i++) {\n        var tempPoint = Object.assign({}, boxes.layers[0][i]);\n        tempPoint.y = tempPoint.y0;\n        boundary.push(tempPoint);\n    }\n\n    for (var i = boxes.layers[boxes.layers.length - 1].length - 1; i >= 0; i--) {\n        var tempPoint2 = Object.assign({}, boxes.layers[boxes.layers.length - 1][i]);\n        tempPoint2.y = tempPoint2.y + tempPoint2.y0;\n        boundary.push(tempPoint2);\n    }       // Add next (8) elements\n\n    var lenb = boundary.length;\n\n    // Get the string for path\n\n    var combined = lineCardinal(boundary.slice(0, lenb / 2))\n        + \"L\"\n        + lineCardinal(boundary.slice(lenb / 2, lenb))\n            .substring(1, lineCardinal(boundary.slice(lenb / 2, lenb)).length)\n        + \"Z\";\n    // ============= Get LAYER PATH ==============\n\n    layerPath = mainGroup.append(\"path\")\n        .attr(\"d\", combined)\n        .attr(\"visibility\", \"hidden\")\n        .attr(\"class\", \"layerpath\")\n        .attr({\n            'fill-opacity': 1,\n            'stroke-opacity': 0,\n        });\n    // draw curves\n    var topics = boxes.topics;\n\n    var curve = mainGroup.selectAll('.curve').data(boxes.layers);\n\n    curve.exit().remove();\n\n    curve.enter()\n        .append('path')\n        .attr('d', area)\n        .style('fill', function (d, i) {\n            return color(i);\n        })\n        .attr({\n            \"class\": \"curve\",\n            'fill-opacity': 0,\n            stroke: 'black',\n            'stroke-width': 0,\n            topic: function (d, i) {\n                return topics[i];\n            }\n        });\n\n    curve.attr(\"d\", area)\n        .style('fill', function (d, i) {\n            return color(i);\n        })\n        .attr({\n            'fill-opacity': 0,\n            stroke: 'black',\n            'stroke-width': 0,\n            topic: function (d, i) {\n                return topics[i];\n            }\n        });\n\n\n    var allWords = [];\n    d3.map(boxes.data, function (row) {\n        boxes.topics.forEach(topic => {\n            allWords = allWords.concat(row.words[topic]);\n        });\n    });\n\n    allW = JSON.parse(JSON.stringify(allWords));\n\n    opacity = d3.scale.log()\n        .domain([minSud, maxSud])\n        .range([0.4, 1]);\n\n    var lineScale;\n    if (fileName.indexOf(\"Huffington\") >= 0) {\n        d3.json(\"data/linksHuff2012.json\", function (error, rawLinks) {\n            const threshold = 5;\n            const links = rawLinks.filter(d => d.weight > threshold);\n            var isRel = document.getElementById(\"rel\").checked;\n\n            links.forEach(d => {\n                d.sourceID = d.sourceID.split(\".\").join(\"_\").split(\" \").join(\"_\");\n                d.targetID = d.targetID.split(\".\").join(\"_\").split(\" \").join(\"_\");\n            });\n            let visibleLinks = [];\n\n            // select only links with: word place = true and have same id\n            links.forEach(d => {\n                let s = allWords.find(w => (w.id === d.sourceID) && (w.placed === true));\n                let t = allWords.find(w => (w.id === d.targetID) && (w.placed === true));\n                if ((s !== undefined) && (t !== undefined)) {\n                    visibleLinks.push({\n                        sourceX: s.x,\n                        sourceY: s.y,\n                        targetX: t.x,\n                        targetY: t.y,\n                        weight: d.weight,\n                        sourceID: d.sourceID,\n                        targetID: d.targetID,\n                        id: d.sourceID + \"_\" + d.targetID\n                    });\n                }\n            });\n\n            lineScale = d3.scale.linear()\n                .domain(d3.extent(visibleLinks, d => d.weight))\n                .range([0.5, 3]);\n\n            opacScale = d3.scale.linear()\n                .domain(d3.extent(visibleLinks, d => d.weight))\n                .range([0.5, 1]);\n\n            var connection = mainGroup.selectAll(\".connection\").data(visibleLinks, d => d.id);\n            connection.exit().remove();\n\n            connection.enter()\n                .append(\"line\")\n                .attr(\"class\", \"connection\");\n\n            connection.transition()\n                .duration(800)\n                .attr(\"opacity\", isRel ? 1 : 0)\n                .attr({\n                    \"x1\": d => d.sourceX,\n                    \"y1\": d => d.sourceY,\n                    \"x2\": d => d.targetX,\n                    \"y2\": d => d.targetY,\n                    \"stroke\": \"#444444\",\n                    \"stroke-opacity\": d => opacScale(d.weight),\n                    \"stroke-width\": d => lineScale(d.weight)\n                });\n            drawWords();\n        });\n    } else drawWords();\n\n    function drawWords() {\n        var prevColor;\n\n        var texts = mainGroup.selectAll('.word').data(allWords, d => d.id);\n\n        texts.exit().remove();\n\n        var textEnter = texts.enter().append('g')\n            .attr({\n                transform: function (d) {\n                    return 'translate(' + d.x + ', ' + d.y + ')rotate(' + d.rotate + ')';\n                }\n            })\n            .attr(\"class\", \"word\")\n            .append('text')\n\n        textEnter\n            .text(function (d) {\n                return d.text;\n            })\n            .attr({\n                \"id\": d => d.id,\n                \"class\": \"textData\",\n                'font-family': font,\n                'font-size': function (d) {\n                    return d.fontSize;\n                },\n                \"fill\": function (d, i) {\n                    return color(categories.indexOf(d.topic));\n                },\n                \"fill-opacity\": function (d) {\n                    return opacity(d.sudden);\n                },\n                'text-anchor': 'middle',\n                'alignment-baseline': 'middle',\n                topic: function (d) {\n                    return d.topic;\n                },\n                visibility: function (d) {\n                    return d.placed ? \"visible\" : \"hidden\";\n                }\n            });\n\n        texts.transition().duration(800)\n            .attr({\n                transform: function (d) {\n                    return 'translate(' + d.x + ', ' + d.y + ')rotate(' + d.rotate + ')';\n                }\n            })\n            .select(\"text\")\n            .attr('font-size', function (d) {\n                return d.fontSize;\n            })\n            .attr({\n                visibility: function (d) {\n                    return d.placed ? \"visible\" : \"hidden\";\n                }\n            });\n\n        // texts.style(\"text-decoration\", \"underline\");\n\n        mainGroup.selectAll(\".connection\").on(\"mouseover\", function () {\n            var thisLink = d3.select(this);\n            thisLink.style('cursor', 'crosshair');\n            // in order to select by byid, the id must not have space\n            var sourceText = mainGroup.select(\"#\" + thisLink[0][0].__data__.sourceID);\n            var prevSourceColor = sourceText.attr(\"fill\");\n            var targetText = mainGroup.select(\"#\" + thisLink[0][0].__data__.targetID);\n            var prevTargetColor = targetText.attr(\"fill\");\n\n            thisLink.attr(\"stroke-width\", 4);\n\n            sourceText.attr({\n                stroke: prevSourceColor,\n                fill: prevSourceColor,\n                'stroke-width': 1.5\n            });\n\n            targetText.attr({\n                stroke: prevTargetColor,\n                fill: prevTargetColor,\n                'stroke-width': 1.5\n            });\n        });\n\n        mainGroup.selectAll(\".connection\").on(\"mouseout\", function () {\n            var thisLink = d3.select(this);\n            thisLink.style('cursor', 'crosshair');\n            var sourceText = mainGroup.select(\"#\" + thisLink[0][0].__data__.sourceID);\n            var targetText = mainGroup.select(\"#\" + thisLink[0][0].__data__.targetID);\n\n            thisLink.attr(\"stroke-width\", lineScale(thisLink[0][0].__data__.weight));\n\n            sourceText.attr({\n                stroke: 'none',\n                'stroke-width': 0\n            });\n\n            targetText.attr({\n                stroke: 'none',\n                'stroke-width': 0\n            });\n        });\n\n        //Highlight\n        mainGroup.selectAll('.textData').on('mouseenter', function () {\n            var thisText = d3.select(this);\n            thisText.style('cursor', 'pointer');\n            prevColor = thisText.attr('fill');\n            var text = thisText.text();\n            var topic = thisText.attr('topic');\n            var allTexts = mainGroup.selectAll('.textData').filter(t => {\n                return t && t.text === text && t.topic === topic;\n            });\n            allTexts.attr({\n                stroke: prevColor,\n                'stroke-width': 1\n            });\n        });\n        mainGroup.selectAll('.textData').on('mouseout', function () {\n            var thisText = d3.select(this);\n            thisText.style('cursor', 'default');\n            var text = thisText.text();\n            var topic = thisText.attr('topic');\n            var allTexts = mainGroup.selectAll('.textData').filter(t => {\n                return t && !t.cloned && t.text === text && t.topic === topic;\n            });\n            allTexts.attr({\n                stroke: 'none',\n                'stroke-width': '0'\n            });\n        });\n        //Click\n        mainGroup.selectAll('.textData').on('click', function () {\n            var thisText = d3.select(this);\n            var text = thisText.text();\n            var topic = thisText.attr('topic');\n            var allTexts = mainGroup.selectAll('.textData').filter(t => {\n                return t && t.text === text && t.topic === topic;\n            });\n            //Select the data for the stream layers\n            var streamLayer = d3.select(\"path[topic='\" + topic + \"']\")[0][0].__data__;\n            //Push all points\n            var points = Array();\n            //Initialize all points\n            streamLayer.forEach(elm => {\n                points.push({\n                    x: elm.x,\n                    y0: elm.y0 + elm.y,\n                    y: 0//zero as default\n                });\n            });\n            allTexts[0].forEach(t => {\n                var data = t.__data__;\n                var fontSize = data.fontSize;\n                //The point\n                var thePoint = points[data.timeStep + 1];\n                ;//+1 since we added 1 to the first point and 1 to the last point.\n                thePoint.y = -data.streamHeight;\n                //Set it to visible.\n                //Clone the nodes.\n                var clonedNode = t.cloneNode(true);\n                d3.select(clonedNode).attr({\n                    visibility: \"visible\",\n                    stroke: 'none',\n                    'stroke-size': 0,\n                });\n                var clonedParentNode = t.parentNode.cloneNode(false);\n                clonedParentNode.appendChild(clonedNode);\n\n                t.parentNode.parentNode.appendChild(clonedParentNode);\n                d3.select(clonedParentNode).attr({\n                    cloned: true,\n                    topic: topic\n                }).transition().duration(300).attr({\n                    transform: function (d, i) {\n                        return 'translate(' + thePoint.x + ',' + (thePoint.y0 + thePoint.y - fontSize / 2) + ')';\n                    },\n                });\n            });\n            //Add the first and the last points\n            points[0].y = points[1].y;//First point\n            points[points.length - 1].y = points[points.length - 2].y;//Last point\n            //Append stream\n            wordStreamG.append('path')\n                .datum(points)\n                .attr('d', area)\n                .style('fill', prevColor)\n                .attr({\n                    'fill-opacity': prevColor,\n                    stroke: 'black',\n                    'stroke-width': 0.3,\n                    topic: topic,\n                    wordStream: true\n                });\n            //Hide all other texts\n            var allOtherTexts = mainGroup.selectAll('.textData').filter(t => {\n                return t && !t.cloned && t.topic === topic;\n            });\n            allOtherTexts.attr('visibility', 'hidden');\n        });\n        topics.forEach(topic => {\n            d3.select(\"path[topic='\" + topic + \"']\").on('click', function () {\n                mainGroup.selectAll('.textData').filter(t => {\n                    return t && !t.cloned && t.placed && t.topic === topic;\n                }).attr({\n                    visibility: 'visible'\n                });\n                //Remove the cloned element\n                document.querySelectorAll(\"g[cloned='true'][topic='\" + topic + \"']\").forEach(node => {\n                    node.parentNode.removeChild(node);\n                });\n                //Remove the added path for it\n                document.querySelectorAll(\"path[wordStream='true'][topic='\" + topic + \"']\").forEach(node => {\n                    node.parentNode.removeChild(node);\n                });\n            });\n\n        });\n\n        //Build the legends\n        legendGroup.attr('transform', 'translate(' + margins.left + ',' + (height + margins.top + legendOffset) + ')');\n        var legendNodes = legendGroup.selectAll('g').data(boxes.topics).enter().append('g')\n            .attr('transform', function (d, i) {\n                return 'translate(' + 10 + ',' + (i * legendFontSize) + ')';\n            });\n        legendNodes.append('circle').attr({\n            r: 5,\n            fill: function (d, i) {\n                return color(i);\n            },\n            'fill-opacity': 1,\n            stroke: 'black',\n            'stroke-width': .5,\n        });\n        legendNodes.append('text').text(function (d) {\n            return d;\n        }).attr({\n            'font-size': legendFontSize,\n            'alignment-baseline': 'middle',\n            dx: 8\n        });\n        spinner.stop();\n    };\n}\n\nfunction styleAxis(axisNodes) {\n    axisNodes.selectAll('.domain').attr({\n        fill: 'none'\n    });\n    axisNodes.selectAll('.tick line').attr({\n        fill: 'none',\n    });\n    axisNodes.selectAll('.tick text').attr({\n        'font-family': 'serif',\n        'font-size': 15\n    });\n}\n\nfunction styleGridlineNodes(gridlineNodes) {\n    gridlineNodes.selectAll('.domain').attr({\n        fill: 'none',\n        stroke: 'none'\n    });\n    gridlineNodes.selectAll('.tick line').attr({\n        fill: 'none',\n        'stroke-width': 0.7,\n        stroke: 'lightgray'\n    });\n}\n"],"file":"main.dev.js"}